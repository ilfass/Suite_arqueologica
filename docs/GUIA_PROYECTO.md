# üìö GU√çA DEL PROYECTO: Suite Arqueol√≥gica

Esta gu√≠a es el punto de referencia para cualquier desarrollador, asistente o usuario t√©cnico que trabaje con este sistema. Aqu√≠ encontrar√°s TODO lo esencial para evitar errores, ahorrar tiempo y mantener buenas pr√°cticas.

---

## üåç ECOSISTEMA ARQUEOL√ìGICO GLOBAL

### **Visi√≥n y Contexto**

La Suite Arqueol√≥gica se posiciona como una plataforma integral que conecta y optimiza el ecosistema arqueol√≥gico global, facilitando la colaboraci√≥n entre diferentes actores y mejorando la eficiencia en la gesti√≥n de proyectos arqueol√≥gicos.

### **üèõÔ∏è Actores del Ecosistema**

#### **Instituciones Acad√©micas**
- **Universidades** ‚Üí Formaci√≥n de estudiantes, investigaci√≥n acad√©mica
- **Institutos de Investigaci√≥n** ‚Üí Proyectos cient√≠ficos especializados
- **Laboratorios** ‚Üí An√°lisis de materiales, dataci√≥n, conservaci√≥n

#### **Organismos Gubernamentales**
- **INAH (M√©xico)** ‚Üí Protecci√≥n y gesti√≥n del patrimonio arqueol√≥gico
- **Ministerios de Cultura** ‚Üí Pol√≠ticas p√∫blicas y regulaciones
- **Secretar√≠as de Turismo** ‚Üí Desarrollo tur√≠stico sostenible

#### **Organizaciones Internacionales**
- **UNESCO** ‚Üí Patrimonio mundial, est√°ndares internacionales
- **ICOMOS** ‚Üí Conservaci√≥n del patrimonio cultural
- **ICOM** ‚Üí Museos y colecciones

#### **Sector Privado**
- **Consultoras Arqueol√≥gicas** ‚Üí Servicios profesionales
- **Empresas de Construcci√≥n** ‚Üí Arqueolog√≠a preventiva
- **Desarrolladores Tur√≠sticos** ‚Üí Proyectos sostenibles

#### **Comunidades Locales**
- **Pueblos Originarios** ‚Üí Conocimiento tradicional
- **Comunidades Rurales** ‚Üí Participaci√≥n y beneficios locales
- **Organizaciones Civiles** ‚Üí Defensa del patrimonio

### **üî¨ Tipos de Proyectos Arqueol√≥gicos**

#### **Investigaci√≥n Acad√©mica**
- **Excavaciones Sistem√°ticas** ‚Üí Metodolog√≠a cient√≠fica rigurosa
- **Prospecciones Arqueol√≥gicas** ‚Üí Identificaci√≥n de sitios
- **An√°lisis de Laboratorio** ‚Üí Estudios especializados
- **Publicaciones Cient√≠ficas** ‚Üí Difusi√≥n de resultados

#### **Arqueolog√≠a Preventiva**
- **Evaluaciones de Impacto** ‚Üí Antes de obras de infraestructura
- **Rescates Arqueol√≥gicos** ‚Üí Salvamento de sitios amenazados
- **Monitoreo de Obras** ‚Üí Supervisi√≥n durante construcci√≥n

#### **Conservaci√≥n y Restauraci√≥n**
- **Conservaci√≥n Preventiva** ‚Üí Mantenimiento de sitios
- **Restauraci√≥n Arquitect√≥nica** ‚Üí Rehabilitaci√≥n de estructuras
- **Conservaci√≥n de Materiales** ‚Üí Tratamiento de artefactos

#### **Difusi√≥n y Educaci√≥n**
- **Museos y Exposiciones** ‚Üí Exhibici√≥n p√∫blica
- **Programas Educativos** ‚Üí Formaci√≥n de p√∫blicos
- **Turismo Cultural** ‚Üí Visitas guiadas y experiencias

### **üìä Flujos de Informaci√≥n**

#### **Recopilaci√≥n de Datos**
- **Registro de Campo** ‚Üí Notas, fotograf√≠as, dibujos
- **Documentaci√≥n Digital** ‚Üí Modelos 3D, GIS, bases de datos
- **An√°lisis Cient√≠ficos** ‚Üí Dataci√≥n, an√°lisis de materiales
- **Archivos Hist√≥ricos** ‚Üí Documentaci√≥n previa

#### **Procesamiento y An√°lisis**
- **Sistemas de Informaci√≥n Geogr√°fica (GIS)** ‚Üí An√°lisis espacial
- **Bases de Datos Relacionales** ‚Üí Organizaci√≥n de informaci√≥n
- **An√°lisis Estad√≠sticos** ‚Üí Interpretaci√≥n de datos
- **Modelado 3D** ‚Üí Reconstrucciones virtuales

#### **Difusi√≥n y Acceso**
- **Publicaciones Acad√©micas** ‚Üí Revistas especializadas
- **Reportes T√©cnicos** ‚Üí Documentaci√≥n oficial
- **Plataformas Digitales** ‚Üí Acceso p√∫blico
- **Exposiciones** ‚Üí Difusi√≥n cultural

### **üéØ Beneficios del Ecosistema Integrado**

#### **Para Investigadores**
- **Colaboraci√≥n Global** ‚Üí Redes de investigaci√≥n internacionales
- **Acceso a Datos** ‚Üí Informaci√≥n compartida y estandarizada
- **Herramientas Avanzadas** ‚Üí Tecnolog√≠as de vanguardia
- **Financiamiento** ‚Üí Oportunidades de financiaci√≥n

#### **Para Instituciones**
- **Gesti√≥n Eficiente** ‚Üí Optimizaci√≥n de recursos
- **Cumplimiento Normativo** ‚Üí Est√°ndares internacionales
- **Visibilidad** ‚Üí Posicionamiento institucional
- **Colaboraci√≥n** ‚Üí Alianzas estrat√©gicas

#### **Para Estudiantes**
- **Formaci√≥n Integral** ‚Üí Experiencia pr√°ctica y te√≥rica
- **Redes Profesionales** ‚Üí Contactos en el sector
- **Acceso a Recursos** ‚Üí Herramientas y datos
- **Oportunidades Laborales** ‚Üí Inserci√≥n profesional

#### **Para la Sociedad**
- **Preservaci√≥n del Patrimonio** ‚Üí Conservaci√≥n para futuras generaciones
- **Educaci√≥n Cultural** ‚Üí Conocimiento del pasado
- **Desarrollo Sostenible** ‚Üí Turismo responsable
- **Identidad Cultural** ‚Üí Fortalecimiento de ra√≠ces

### **üöÄ Tecnolog√≠as Emergentes**

#### **Tecnolog√≠as de Campo**
- **Drones y Fotogrametr√≠a** ‚Üí Documentaci√≥n a√©rea
- **Esc√°neres 3D** ‚Üí Registro preciso de estructuras
- **Sensores Remotos** ‚Üí Prospecci√≥n no invasiva
- **GPS de Alta Precisi√≥n** ‚Üí Georreferenciaci√≥n exacta

#### **An√°lisis Digital**
- **Inteligencia Artificial** ‚Üí Clasificaci√≥n autom√°tica
- **Machine Learning** ‚Üí Predicci√≥n de patrones
- **Big Data** ‚Üí An√°lisis masivo de informaci√≥n
- **Realidad Virtual/Aumentada** ‚Üí Experiencias inmersivas

#### **Gesti√≥n de Datos**
- **Bases de Datos Distribuidas** ‚Üí Acceso global
- **Blockchain** ‚Üí Trazabilidad de informaci√≥n
- **Cloud Computing** ‚Üí Procesamiento en la nube
- **APIs Interoperables** ‚Üí Integraci√≥n de sistemas

### **üìà M√©tricas de √âxito**

#### **Indicadores Cuantitativos**
- **N√∫mero de Proyectos** ‚Üí Actividad arqueol√≥gica
- **Sitios Documentados** ‚Üí Cobertura geogr√°fica
- **Publicaciones Generadas** ‚Üí Producci√≥n acad√©mica
- **Usuarios Activos** ‚Üí Adopci√≥n de la plataforma

#### **Indicadores Cualitativos**
- **Calidad de Investigaci√≥n** ‚Üí Rigor cient√≠fico
- **Colaboraci√≥n Interinstitucional** ‚Üí Trabajo en red
- **Impacto Social** ‚Üí Beneficios comunitarios
- **Innovaci√≥n Tecnol√≥gica** ‚Üí Avances metodol√≥gicos

---

## üíº MODELO DE NEGOCIO Y ROLES

### **üé≠ Sistema de Roles y Permisos**

#### **ADMIN (Administrador del Sistema)**
- **Responsabilidades:**
  - Gesti√≥n completa del sistema y usuarios
  - Administraci√≥n de instituciones y suscripciones
  - Reportes del sistema y m√©tricas globales
  - Configuraci√≥n de pol√≠ticas y seguridad
  - Supervisi√≥n de toda la plataforma

- **Funcionalidades Espec√≠ficas:**
  - Dashboard con estad√≠sticas globales
  - Gesti√≥n de usuarios (crear, editar, eliminar, asignar roles)
  - Gesti√≥n de instituciones y suscripciones
  - Reportes del sistema y an√°lisis de uso
  - Configuraci√≥n de pol√≠ticas de seguridad
  - Monitoreo de actividad y auditor√≠a

#### **RESEARCHER (Investigador)**
- **Responsabilidades:**
  - Liderar proyectos de investigaci√≥n arqueol√≥gica
  - Documentar hallazgos y excavaciones
  - Gestionar equipos de trabajo
  - Publicar resultados de investigaci√≥n
  - Colaborar con otros investigadores

- **Funcionalidades Espec√≠ficas:**
  - Dashboard con proyectos activos y m√©tricas
  - Gesti√≥n completa de sitios arqueol√≥gicos
  - Documentaci√≥n detallada de artefactos
  - Registro y seguimiento de excavaciones
  - Generaci√≥n de reportes de investigaci√≥n
  - Herramientas de an√°lisis y visualizaci√≥n

#### **DIRECTOR (Director de Proyecto/Instituci√≥n)**
- **Responsabilidades:**
  - Aprobar proyectos de investigaci√≥n
  - Supervisar investigadores y equipos
  - Gestionar permisos y autorizaciones
  - Coordinar con instituciones gubernamentales
  - Asegurar cumplimiento normativo

- **Funcionalidades Espec√≠ficas:**
  - Dashboard de aprobaciones pendientes
  - Gesti√≥n de proyectos y asignaci√≥n de recursos
  - Supervisi√≥n de usuarios y equipos
  - Coordinaci√≥n institucional y reportes
  - Gesti√≥n de permisos y autorizaciones

#### **STUDENT (Estudiante)**
- **Responsabilidades:**
  - Participar en excavaciones y proyectos
  - Tomar notas de campo y documentar
  - Aprender metodolog√≠as arqueol√≥gicas
  - Acceder a recursos educativos
  - Colaborar en equipos de investigaci√≥n

- **Funcionalidades Espec√≠ficas:**
  - Dashboard con tareas asignadas y progreso
  - Sistema de notas de campo digital
  - Tutoriales y recursos educativos
  - Acceso a datos p√∫blicos y bibliograf√≠a
  - Seguimiento de progreso acad√©mico
  - Herramientas de colaboraci√≥n

#### **INSTITUTION (Instituci√≥n)**
- **Responsabilidades:**
  - Gestionar proyectos institucionales
  - Coordinar investigadores y equipos
  - Generar reportes institucionales
  - Cumplir con normativas y est√°ndares
  - Promover la investigaci√≥n arqueol√≥gica

- **Funcionalidades Espec√≠ficas:**
  - Dashboard institucional con m√©tricas
  - Gesti√≥n de proyectos y investigadores
  - Reportes institucionales y financieros
  - Herramientas de coordinaci√≥n
  - Cumplimiento normativo y auditor√≠a

#### **GUEST (Invitado)**
- **Responsabilidades:**
  - Explorar datos p√∫blicos
  - Informaci√≥n general y educativa
  - Sin acceso a funcionalidades privadas
  - Difusi√≥n cultural

- **Funcionalidades Espec√≠ficas:**
  - Visualizaci√≥n de sitios arqueol√≥gicos p√∫blicos
  - Informaci√≥n b√°sica de artefactos
  - Datos de excavaciones p√∫blicas
  - Recursos educativos generales
  - Sin capacidad de edici√≥n o gesti√≥n

### **üí∞ Modelo de Negocio**

#### **Estructura de Suscripciones**

##### **Plan B√°sico (GRATUITO)**
- **Rol:** GUEST
- **Funcionalidades:**
  - Acceso limitado a datos p√∫blicos
  - Informaci√≥n b√°sica de sitios arqueol√≥gicos
  - Recursos educativos generales
  - Sin capacidad de edici√≥n

##### **Plan Estudiante (GRATUITO)**
- **Rol:** STUDENT
- **Funcionalidades:**
  - Acceso completo para estudiantes
  - Herramientas educativas avanzadas
  - Sistema de notas de campo
  - Tutoriales y recursos de aprendizaje
  - Colaboraci√≥n en proyectos

##### **Plan Investigador (PAGO - $29/mes)**
- **Rol:** RESEARCHER
- **Funcionalidades:**
  - Acceso completo a herramientas de investigaci√≥n
  - Gesti√≥n de proyectos y sitios arqueol√≥gicos
  - Documentaci√≥n avanzada de artefactos
  - Reportes cient√≠ficos y an√°lisis
  - Colaboraci√≥n con otros investigadores
  - Herramientas de visualizaci√≥n 3D

##### **Plan Director (PAGO - $79/mes)**
- **Rol:** DIRECTOR
- **Funcionalidades:**
  - Supervisi√≥n y aprobaci√≥n de proyectos
  - Gesti√≥n de equipos y recursos
  - Reportes ejecutivos y m√©tricas
  - Coordinaci√≥n institucional
  - Herramientas de gesti√≥n avanzada

##### **Plan Institucional (PAGO - $199/mes)**
- **Rol:** INSTITUTION
- **Funcionalidades:**
  - Gesti√≥n de m√∫ltiples investigadores
  - Reportes institucionales avanzados
  - Herramientas de coordinaci√≥n
  - Cumplimiento normativo
  - API para integraci√≥n con sistemas existentes

##### **Plan Enterprise (PAGO - $499/mes)**
- **Rol:** ADMIN
- **Funcionalidades:**
  - Acceso completo del sistema
  - Personalizaci√≥n completa
  - Soporte prioritario
  - Integraci√≥n con sistemas externos
  - Capacitaci√≥n y consultor√≠a

#### **Fuentes de Ingresos**

##### **Suscripciones Mensuales/Anuales**
- **Investigadores Independientes:** $29/mes
- **Directores de Proyecto:** $79/mes
- **Instituciones Acad√©micas:** $199/mes
- **Empresas y Consultoras:** $499/mes

##### **Servicios Profesionales**
- **Implementaci√≥n Personalizada:** $5,000 - $50,000
- **Capacitaci√≥n y Consultor√≠a:** $150/hora
- **Desarrollo de M√≥dulos Espec√≠ficos:** $10,000 - $100,000
- **Migraci√≥n de Datos:** $2,000 - $20,000

##### **Servicios de Valor Agregado**
- **An√°lisis de Datos Avanzado:** $500 - $5,000
- **Reportes Personalizados:** $200 - $2,000
- **Integraci√≥n con Sistemas Existentes:** $1,000 - $10,000
- **Soporte T√©cnico Premium:** $100/mes

#### **Estrategia de Mercado**

##### **Segmentaci√≥n de Mercado**
- **Acad√©mico:** Universidades, institutos de investigaci√≥n
- **Gubernamental:** INAH, ministerios de cultura
- **Privado:** Consultoras arqueol√≥gicas, empresas de construcci√≥n
- **Educativo:** Estudiantes y profesores
- **Cultural:** Museos, organizaciones sin fines de lucro

##### **Canales de Distribuci√≥n**
- **Venta Directa:** Sitio web, demos en vivo
- **Partnerships:** Alianzas con instituciones acad√©micas
- **Referencias:** Usuarios satisfechos
- **Eventos:** Conferencias arqueol√≥gicas, ferias

##### **Estrategia de Precios**
- **Freemium:** Acceso b√°sico gratuito para captar usuarios
- **Precios Competitivos:** Por debajo del mercado actual
- **Descuentos Institucionales:** Para universidades y gobiernos
- **Precios por Volumen:** Descuentos para m√∫ltiples usuarios

---

## 1. üì¶ Estructura de Carpetas Clave

- `/backend` ‚Üí API, l√≥gica de negocio, conexi√≥n Supabase
- `/frontend-web` ‚Üí Frontend web (Next.js)
- `/frontend-mobile` ‚Üí Frontend m√≥vil (React Native)
- `/shared` ‚Üí C√≥digo y tipos compartidos

---

## 2. üîë Variables de Entorno (ENV)

**Ubicaci√≥n:** `/backend/.env` y `/frontend-web/.env.local`

### Backend (`/backend/.env`):
```bash
# Configuraci√≥n de Supabase (valores de prueba)
SUPABASE_URL=https://avpaiyyjixtdopbciedr.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF2cGFpeXlqaXh0ZG9wYmNpZWRyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg2NjAzMjMsImV4cCI6MjA2NDIzNjMyM30.1rreoeSBexWbEKdRtIbSwQcWwD3i53RAqFWt5qe820A
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF2cGFpeXlqaXh0ZG9wYmNpZWRyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0ODY2MDMyMywiZXhwIjoyMDY0MjM2MzIzfQ.jb6t6O2-c0SHv5WAw4F7u93dbGrZ8TKh0UTNzcNEOhc

# Configuraci√≥n del servidor
PORT=4000
NODE_ENV=development

# Configuraci√≥n de JWT
JWT_SECRET=suite_arqueologica_jwt_secret_key_2024
JWT_EXPIRES_IN=7d

# Configuraci√≥n de CORS
CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# Configuraci√≥n de logs
LOG_LEVEL=debug

# Configuraci√≥n de rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

### Frontend (`/frontend-web/.env.local`):
```bash
NEXT_PUBLIC_SUPABASE_URL=https://avpaiyyjixtdopbciedr.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF2cGFpeXlqaXh0ZG9wYmNpZWRyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg2NjAzMjMsImV4cCI6MjA2NDIzNjMyM30.1rreoeSBexWbEKdRtIbSwQcWwD3i53RAqFWt5qe820A
BACKEND_URL=http://localhost:4000
```

> **IMPORTANTE:** Nunca subas estos archivos a git. Si cambias las credenciales, actualiza esta gu√≠a.

---

## 3. üó∫Ô∏è Rutas y Endpoints Esenciales

### Backend (API REST)
- `POST   /api/auth/login`         ‚Üí Login de usuario
- `POST   /api/auth/logout`        ‚Üí Logout
- `GET    /api/sites`              ‚Üí Listar sitios arqueol√≥gicos
- `GET    /api/artifacts`          ‚Üí Listar artefactos
- `GET    /api/excavations`        ‚Üí Listar excavaciones
- `POST   /api/sites`              ‚Üí Crear sitio (requiere token)
- `POST   /api/artifacts`          ‚Üí Crear artefacto (requiere token)
- `POST   /api/excavations`        ‚Üí Crear excavaci√≥n (requiere token)
- `GET    /api/health`             ‚Üí Estado del backend

### Frontend
- `http://localhost:3000`         ‚Üí Web app
- `http://localhost:3000/login`   ‚Üí Login
- `http://localhost:3000/dashboard` ‚Üí Dashboard por rol

---

## 4. üë§ Credenciales de Prueba

| Rol         | Email                        | Contrase√±a        |
|-------------|------------------------------|-------------------|
| ADMIN       | fa07fa@gmail.com             | 3por39            |
| RESEARCHER  | dr.perez@unam.mx            | investigador123   |
| STUDENT     | estudiante@universidad.edu   | estudiante123     |
| DIRECTOR    | director@inah.gob.mx         | director123       |
| INSTITUTION | admin@inah.gob.mx            | institucion123    |
| GUEST       | invitado@example.com         | invitado123       |

> **Nota:** Si alguna credencial no funciona, revisa la sincronizaci√≥n entre Supabase y la tabla `public.users`.

---

## 5. üóÑÔ∏è Estructura de Base de Datos

### Tablas Principales
- `public.users` ‚Üí Usuarios del sistema
- `public.archaeological_sites` ‚Üí Sitios arqueol√≥gicos
- `public.artifacts` ‚Üí Artefactos
- `public.excavations` ‚Üí Excavaciones
- `public.documents` ‚Üí Documentos
- `public.measurements` ‚Üí Mediciones
- `public.site_permissions` ‚Üí Permisos
- `public.notifications` ‚Üí Notificaciones

### Pol√≠ticas RLS (Row Level Security)
- **users**: Solo el propio usuario puede ver/editar su perfil
- **archaeological_sites**: Cualquiera puede ver sitios activos
- **artifacts**: Cualquiera puede ver artefactos activos
- **excavations**: Cualquiera puede ver excavaciones activas

### Extensiones Requeridas
- `uuid-ossp` ‚Üí Para generar UUIDs
- `postgis` ‚Üí Para datos geogr√°ficos

---

## 6. ‚öôÔ∏è Comandos √ötiles

### Backend
```bash
cd backend
npm install
npm run dev
```

### Frontend Web
```bash
cd frontend-web
npm install
npm run dev
```

### Pruebas Autom√°ticas
```bash
node test_login_roles_visual.js      # Prueba visual de login
node test_api_roles.js               # Prueba de APIs por rol
```

### Crear Tablas en Supabase
- Ejecuta el contenido de `create_supabase_tables.sql` en el SQL Editor de Supabase si faltan tablas.
- Si usas scripts autom√°ticos, aseg√∫rate de tener las variables de entorno correctas.

---

## 7. üö¶ Flujo de Trabajo Recomendado

1. **Verifica variables de entorno** en `/backend/.env` y `/frontend-web/.env.local`.
2. **Ejecuta backend y frontend** en terminales separadas.
3. **Corre los scripts de prueba** para login y APIs.
4. **Si hay errores 400/401/403:**
   - Verifica que las tablas existan en Supabase
   - Revisa las pol√≠ticas RLS y los triggers
   - Consulta los logs del backend
5. **Para agregar datos de prueba:**
   - Usa el frontend o scripts SQL
6. **Documenta cualquier cambio importante en esta gu√≠a.**

---

## 8. üîß Troubleshooting

### Errores Comunes y Soluciones

#### Error 400: "relation does not exist"
**Problema:** Las tablas no existen en Supabase
**Soluci√≥n:** 
1. Ve al dashboard de Supabase
2. Navega a SQL Editor
3. Ejecuta el contenido de `create_supabase_tables.sql`

#### Error 401: "No token provided"
**Problema:** Falta token de autenticaci√≥n
**Soluci√≥n:** 
1. Verifica que el login funcione
2. Revisa que el token se env√≠e en el header Authorization
3. Verifica que el JWT_SECRET est√© configurado

#### Error 403: "Insufficient permissions"
**Problema:** El usuario no tiene permisos para la acci√≥n
**Soluci√≥n:**
1. Verifica el rol del usuario en la tabla `users`
2. Revisa las pol√≠ticas RLS en Supabase
3. Confirma que el usuario est√© autenticado

#### Login falla para GUEST
**Problema:** El rol GUEST no est√° configurado correctamente
**Soluci√≥n:**
1. Verifica que el usuario exista en `public.users`
2. Confirma que el rol sea 'GUEST'
3. Revisa las pol√≠ticas RLS para usuarios no autenticados

### Verificaci√≥n de Estado
```bash
# Verificar backend
curl http://localhost:4000/api/health

# Verificar frontend
curl http://localhost:3000

# Verificar tablas en Supabase
# Ve al dashboard de Supabase > Table Editor
```

---

## 9. üîí Tips de Seguridad

### Variables de Entorno
- ‚úÖ **Nunca subas credenciales a git**
- ‚úÖ **Usa .env.local para desarrollo**
- ‚úÖ **Rota las claves regularmente**
- ‚úÖ **Usa diferentes claves para desarrollo y producci√≥n**

### Autenticaci√≥n
- ‚úÖ **JWT_SECRET debe ser largo y aleatorio**
- ‚úÖ **Configura expiraci√≥n de tokens**
- ‚úÖ **Usa HTTPS en producci√≥n**
- ‚úÖ **Implementa rate limiting**

### Base de Datos
- ‚úÖ **Habilita RLS en todas las tablas**
- ‚úÖ **Define pol√≠ticas espec√≠ficas por rol**
- ‚úÖ **Usa Service Role Key solo en el backend**
- ‚úÖ **Anon Key solo para operaciones p√∫blicas**

### API
- ‚úÖ **Valida todos los inputs**
- ‚úÖ **Usa middleware de autenticaci√≥n**
- ‚úÖ **Implementa logging de errores**
- ‚úÖ **Configura CORS apropiadamente**

---

## 10. üìù Notas y Buenas Pr√°cticas

- **Nunca subas credenciales reales a git.**
- **Actualiza esta gu√≠a** si cambias rutas, credenciales o estructura.
- **Consulta este archivo antes de pedir ayuda o modificar configuraci√≥n.**
- **Si tienes dudas sobre el flujo, revisa los comandos y rutas aqu√≠ listados.**
- **Para debugging:**
  - Usa los endpoints `/api/health` y `/api` para verificar el estado del backend.
  - Usa los logs del backend para rastrear errores de API.

### Logs √ötiles
```bash
# Ver logs del backend
cd backend && npm run dev

# Ver logs del frontend
cd frontend-web && npm run dev

# Verificar procesos activos
ps aux | grep -E "(node|npm)" | grep -v grep

# Verificar puertos
lsof -i :3000 -i :4000
```

---

## 11. üìÅ Archivos Importantes

- `backend/.env`                  ‚Üí Variables de entorno backend
- `frontend-web/.env.local`        ‚Üí Variables de entorno frontend
- `create_supabase_tables.sql`     ‚Üí Script SQL para crear tablas
- `test_login_roles_visual.js`     ‚Üí Prueba visual de login
- `test_api_roles.js`              ‚Üí Prueba de APIs por rol
- `CREDENCIALES_ROLES.md`          ‚Üí Detalle de roles y permisos
- `ESTADO_SISTEMA.md`              ‚Üí Estado actual y bit√°cora
- `GUIA_PROYECTO.md`               ‚Üí Esta gu√≠a

---

## 12. üöÄ Comandos de Inicializaci√≥n R√°pida

```bash
# 1. Iniciar backend
cd backend && npm run dev

# 2. En otra terminal, iniciar frontend
cd frontend-web && npm run dev

# 3. Verificar estado
curl http://localhost:4000/api/health
curl http://localhost:3000

# 4. Probar login
node test_login_roles_visual.js

# 5. Probar APIs
node test_api_roles.js
```

---

**¬°Consulta esta gu√≠a siempre antes de modificar, probar o pedir ayuda!** 